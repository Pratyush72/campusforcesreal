{% extends 'base.html' %}
{% block content %}
<div class="bg-gray-800 text-white p-4 flex justify-between items-center shadow-md mb-6">
  <div class="font-bold text-lg">
    <a href="{% url 'admin_panel:dashboard' %}" class="text-white no-underline">
      ⚙️ CampusForce Admin Panel
    </a>
  </div>
  <div class="space-x-2">
    <a href="{% url 'admin_panel:manage_users' %}" class="bg-indigo-600 hover:bg-indigo-700 px-3 py-1 rounded text-sm">Users</a>
    <a href="{% url 'admin_panel:manage_projects' %}" class="bg-green-600 hover:bg-green-700 px-3 py-1 rounded text-sm">Projects</a>
    <a href="{% url 'admin_panel:manage_livework' %}" class="bg-yellow-500 hover:bg-yellow-600 px-3 py-1 rounded text-sm">LiveWork</a>
    <a href="{% url 'admin_panel:manage_jobs' %}" class="bg-red-600 hover:bg-red-700 px-3 py-1 rounded text-sm">Job Apps</a>
    <a href="/logout/" class="bg-gray-700 hover:bg-gray-900 px-3 py-1 rounded text-sm">Logout</a>
  </div>
</div>

<div class="p-6">
  <h2 class="text-2xl font-semibold mb-4">Manage Users</h2>

  <table class="w-full border border-gray-300 rounded-lg overflow-hidden">
    <thead class="bg-gray-100">
      <tr>
        <th class="p-3 text-left">ID</th>
        <th class="p-3 text-left">Username</th>
        <th class="p-3 text-left">Email</th>
        <th class="p-3 text-left">Coins</th>
        <th class="p-3 text-left">Mobile</th>
        <th class="p-3 text-left">Plan</th>
        <th class="p-3 text-left">Start Date</th>
        <th class="p-3 text-left">End Date</th>
        <th class="p-3 text-left">Actions</th>
      </tr>
    </thead>
    <tbody>
      {% for user in users %}
      <tr class="border-t hover:bg-gray-50">
        <td class="p-3">{{ user.id }}</td>
        <td class="p-3">{{ user.username }}</td>
        <td class="p-3">{{ user.email }}</td>
        <td class="p-3">{{ user.coins }}</td>
        <td class="p-3">{{ user.mobile_number|default:"—" }}</td>
        <td class="p-3 capitalize">{{ user.current_plan }}</td>
        <td class="p-3">
          {% if user.membership_start_date %}
            {{ user.membership_start_date|date:"Y-m-d" }}
          {% else %} — {% endif %}
        </td>
        <td class="p-3">
          {% if user.membership_end_date %}
            {{ user.membership_end_date|date:"Y-m-d" }}
          {% else %} — {% endif %}
        </td>
        <td class="p-3">
          <a href="{% url 'admin_panel:edit_user' user.id %}" class="bg-blue-500 text-white px-3 py-1 rounded hover:bg-blue-600">Edit</a>
        </td>
      </tr>
      {% empty %}
      <tr>
        <td colspan="9" class="p-3 text-center text-gray-500">No users found.</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}
