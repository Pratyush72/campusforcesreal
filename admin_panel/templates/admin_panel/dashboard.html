<!-- admin_panel/templates/admin_panel/dashboard.html -->
{% extends 'base.html' %}
{% block content %}
<!-- ===== Admin Header ===== -->
<div class="bg-gray-800 text-white p-4 flex justify-between items-center shadow-md mb-6">
  <div class="font-bold text-lg">⚙️ CampusForce Admin Panel</div>
  <div class="space-x-2">
    <a href="{% url 'admin_panel:manage_users' %}" class="bg-indigo-600 hover:bg-indigo-700 px-3 py-1 rounded text-sm">Users</a>
    <a href="{% url 'admin_panel:manage_projects' %}" class="bg-green-600 hover:bg-green-700 px-3 py-1 rounded text-sm">Projects</a>
    <a href="{% url 'admin_panel:manage_livework' %}" class="bg-yellow-500 hover:bg-yellow-600 px-3 py-1 rounded text-sm">LiveWork</a>
    <a href="{% url 'admin_panel:manage_jobs' %}" class="bg-red-600 hover:bg-red-700 px-3 py-1 rounded text-sm">Job Apps</a>
    <a href="{% url "logout" %}" class="bg-gray-700 hover:bg-gray-900 px-3 py-1 rounded text-sm">Logout</a>
  </div>
</div>

<div class="p-6">
  <h1 class="text-2xl font-bold mb-4">Admin Dashboard</h1>
  <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
    <div class="bg-white p-4 rounded shadow">
      <div class="text-sm text-gray-500">Total Users</div>
      <div class="text-2xl font-bold">{{ stats.total_users }}</div>
    </div>
    <div class="bg-white p-4 rounded shadow">
      <div class="text-sm text-gray-500">Projects</div>
      <div class="text-2xl font-bold">{{ stats.total_projects }}</div>
    </div>
    <div class="bg-white p-4 rounded shadow">
      <div class="text-sm text-gray-500">LiveWork</div>
      <div class="text-2xl font-bold">{{ stats.total_livework }}</div>
    </div>
    <div class="bg-white p-4 rounded shadow">
      <div class="text-sm text-gray-500">Job Applications</div>
      <div class="text-2xl font-bold">{{ stats.total_job_apps }}</div>
    </div>
  </div>

  <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
    <div class="bg-white p-4 rounded shadow">
      <h3 class="font-semibold mb-3">Recent Projects</h3>
      <ul class="space-y-2">
        {% for p in recent_projects %}
          <li>
            <div class="font-medium">{{ p.title }}</div>
            <div class="text-xs text-gray-500">{{ p.description|truncatechars:80 }}</div>
          </li>
        {% empty %}
          <li class="text-gray-500">No projects</li>
        {% endfor %}
      </ul>
      <div class="mt-3 text-right"><a href="{% url 'admin_panel:manage_projects' %}" class="text-indigo-600">Manage</a></div>
    </div>

    <div class="bg-white p-4 rounded shadow">
      <h3 class="font-semibold mb-3">Recent LiveWork</h3>
      <ul class="space-y-2">
        {% for l in recent_live %}
          <li>
            <div class="font-medium">{{ l.title }}</div>
            <div class="text-xs text-gray-500">Start: {{ l.start_date }} • End: {{ l.end_date }}</div>
          </li>
        {% empty %}
          <li class="text-gray-500">No livework projects</li>
        {% endfor %}
      </ul>
      <div class="mt-3 text-right"><a href="{% url 'admin_panel:manage_livework' %}" class="text-indigo-600">Manage</a></div>
    </div>

    <div class="bg-white p-4 rounded shadow">
      <h3 class="font-semibold mb-3">Recent Job Apps</h3>
      <ul class="space-y-2">
        {% for j in recent_jobs %}
          <li>
            <div class="font-medium">{{ j.user.email }} — {{ j.job.title }}</div>
            <div class="text-xs text-gray-500">Status: {{ j.status }} • {{ j.applied_at }}</div>
          </li>
        {% empty %}
          <li class="text-gray-500">No applications</li>
        {% endfor %}
      </ul>
      <div class="mt-3 text-right"><a href="{% url 'admin_panel:manage_jobs' %}" class="text-indigo-600">Manage</a></div>
    </div>
  </div>
</div>
{% endblock %}
